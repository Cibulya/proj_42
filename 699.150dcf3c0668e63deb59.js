"use strict";(self.webpackChunkproj_42=self.webpackChunkproj_42||[]).push([[699],{478:(e,t,n)=>{n.d(t,{b:()=>s});var r,a="https://guiseppe-production.up.railway.app/api/";!function(e){e.COFFEE="coffee/",e.REGISTER="register/",e.USER="user/",e.LOGIN="login/",e.LOGOUT="logout/",e.SET_PICTURE="setpicture/",e.RESTORE="restore/"}(r||(r={}));var s={getUser:function(){return fetch("".concat(a).concat(r.USER),{method:"GET",credentials:"include",mode:"cors",headers:{}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},createUser:function(e){return fetch("".concat(a).concat(r.REGISTER),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},loginUser:function(e){return fetch("".concat(a).concat(r.LOGIN),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},logoutUser:function(){return fetch("".concat(a).concat(r.LOGOUT),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},updateAvatar:function(e){return fetch("".concat(a).concat(r.SET_PICTURE),{method:"PUT",credentials:"same-origin",mode:"cors",headers:{},body:e}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},restoreUser:function(e){return fetch("".concat(a).concat(r.RESTORE),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}}},6920:(e,t,n)=>{n.d(t,{Z:()=>x});var r=n(5893),a=n(7294),s=n(4160),o=n(2327),i=n(8435),c=n(2640),l=n(1508),u=n(4655),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},p.apply(this,arguments)},d=RegExp(/^\s?[A-Z0–9]+[A-Z0–9._+-]{0,}@[A-Z0–9._+-]+\.[A-Z0–9]{2,4}\s?$/i),h=RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#_$@!%&*?])[A-Za-z\d#_$@!%&*?]{8,30}$/);const f=function(e){var t=(0,o.$)().t;return(0,r.jsxs)("div",p({className:"secretWord"===e.type?"username":e.type},{children:[(0,r.jsx)("label",p({className:"label",htmlFor:e.type},{children:t("".concat(e.type))})),(0,r.jsx)("input",{className:"input",type:"password"===e.type?"password":"text",name:e.type,value:e.initialState[e.type],onChange:function(t){var n;t.preventDefault();var r=t.target,a=r.name,s=r.value;switch(a){case"username":e.initialState.errors.username=s.length<5?"Username must be 5 characters long!":"";break;case"email":e.initialState.errors.email=d.test(s)?"":"Email is not valid!";break;case"password":e.initialState.errors.password=h.test(s)?"":"Password must be minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character";break;case"secretWord":e.initialState.errors.secretWord=s.length<5?"Secret word must be 5 characters long!":""}var o=p(p({},e.initialState),((n={})[a]=s,n));e.checkInputChange(o)}}),e.initialState.errors["".concat(e.type)].length>0&&(0,r.jsx)(u.Z,{text:e.initialState.errors[e.type]})]}))};var m=n(478),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)};const y=function(e){var t=(0,o.$)().t,n=(0,a.useState)({username:"",email:"",password:"",secretWord:"",errors:{username:"",email:"",password:"",secretWord:""}}),s=n[0],i=n[1],c=(0,a.useState)(""),l=c[0],p=c[1],d=(0,a.useRef)(),h=function(e){i(g({},e)),p("")};return(0,r.jsxs)("form",g({ref:d,className:"form",onSubmit:function(t){t.preventDefault();var n=!0;if(Object.values(s.errors).forEach((function(e){return e.length>0&&(n=!1)})),n){switch(e.typeForm){case"sign-up":m.b.createUser({name:s.username,email:s.email,password:s.password,secretWord:s.secretWord}).then((function(e){e&&"User created"===e.message?m.b.loginUser({email:s.email,password:s.password}).then((function(e){e.hasOwnProperty("error")?p(e.error||"Try again"):d.current.parentElement.style.display="none"})):p(e.message||"Try again")}));break;case"login":m.b.loginUser({email:s.email,password:s.password}).then((function(e){if(e.hasOwnProperty("error"))p(e.error||"Try again");else{d.current.parentElement.style.display="none";var t=document.querySelector(".auth-icon");document.querySelector(".account").innerHTML=e.name,t.style.backgroundImage="url(".concat(e.userImage,")")}}));break;case"restore":m.b.restoreUser({email:s.email,newPassword:s.password,secretWord:s.secretWord}).then((function(e){403!==e.statusCode?m.b.loginUser({email:s.email,password:s.password}).then((function(e){e.hasOwnProperty("error")?p(e.error||"Try again"):d.current.parentElement.style.display="none"})):p(e.message||"Try again")}))}i({username:"",email:"",password:"",secretWord:"",errors:{username:"",email:"",password:"",secretWord:""}})}},noValidate:!0},{children:[l.length>0&&(0,r.jsx)(u.Z,{text:l}),"login"===e.typeForm&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{type:"email",checkInputChange:h,initialState:s}),(0,r.jsx)(f,{type:"password",checkInputChange:h,initialState:s})]}),"sign-up"===e.typeForm&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{type:"username",checkInputChange:h,initialState:s}),(0,r.jsx)(f,{type:"email",checkInputChange:h,initialState:s}),(0,r.jsx)(f,{type:"password",checkInputChange:h,initialState:s}),(0,r.jsx)(f,{type:"secretWord",checkInputChange:h,initialState:s})]}),"restore"===e.typeForm&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{type:"email",checkInputChange:h,initialState:s}),(0,r.jsx)(f,{type:"secretWord",checkInputChange:h,initialState:s}),(0,r.jsx)(f,{type:"password",checkInputChange:h,initialState:s})]}),(0,r.jsx)("div",g({className:"submit"},{children:(0,r.jsx)("button",g({className:"learning__btn"},{children:"sign-up"===e.typeForm?t("register"):"restore"===e.typeForm?t("restore"):t("login")}))}))]}))};var b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},b.apply(this,arguments)},v=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},j=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};const x=function(e){var t=(0,o.$)().t,n=a.useState("login"),u=n[0],p=n[1];return(0,r.jsxs)("div",b({className:(0,s.A)("sign-wrapper",{},[e.className])},{children:[(0,r.jsx)("h2",{children:t("authorization")}),(0,r.jsx)(l.Z,b({sx:{width:"100%"}},{children:(0,r.jsxs)(i.Z,b({value:u,onChange:function(e,t){return v(void 0,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,p(t)];case 1:return e.sent(),[2]}}))}))},textColor:"secondary",indicatorColor:"secondary","aria-label":"secondary tabs example"},{children:[(0,r.jsx)(c.Z,{value:"login",label:t("login")}),(0,r.jsx)(c.Z,{value:"sign-up",label:t("sign-up")}),(0,r.jsx)(c.Z,{value:"restore",disableRipple:!0,disabled:!0,className:"hidden"})]}))})),(0,r.jsx)(y,{typeForm:u}),(0,r.jsx)("a",b({onClick:function(e){return v(void 0,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,p("restore")];case 1:return e.sent(),[2]}}))}))}},{children:t("restore")}))]}))}},4655:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(5893),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)};const s=function(e){return(0,r.jsx)("span",a({className:"error-text"},{children:e.text}))}},6411:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(5893),a=n(7294),s=n(4160),o=n(2327),i=n(8435),c=n(2640),l=n(1508),u=n(7109),p=n(478),d=n(4655),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)};const f=function(e){var t=(0,o.$)().t,n=(0,a.useRef)(null),s=(0,a.useState)(""),i=s[0],c=s[1],l=(0,a.useState)(null),f=l[0],m=l[1],g=(0,a.useState)({userName:"",email:"",secretWord:"",userImage:"",isActivated:!1}),y=g[0],b=g[1],v=(0,a.useRef)(),j=(0,a.useRef)(),x=(0,a.useRef)();return(0,a.useEffect)((function(){p.b.getUser().then((function(e){e&&!e.hasOwnProperty("message")?(b(h(h({},y),{email:e.email,userName:e.name,userImage:e.userImage,isActivated:e.isActivated})),e.isActivated||(v.current.textContent="".concat(t("activate")),n.current.disabled=Boolean(!y.userName))):(v.current.textContent="".concat(t("login-reload")),n.current.disabled=Boolean(!y.userName))}))}),[m]),(0,r.jsxs)("form",h({ref:x,className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("userImage",f),t.append("email",y.email),p.b.updateAvatar(t).then((function(e){b(h(h({},y),{userImage:e})),document.querySelector(".auth-icon").style.backgroundImage="url(".concat(e,")")})),n.current.value="",m(null),j.current.disabled=Boolean(!0)},noValidate:!0},{children:[(0,r.jsx)(u.Z,{alt:t("userPhoto"),src:y.userImage,sx:{width:72,height:72}}),(0,r.jsx)("h3",{children:y.userName}),(0,r.jsx)("label",h({ref:v,className:"label label-file",htmlFor:"file"},{children:t("add-file")})),(0,r.jsx)("input",{ref:n,id:"file",className:"input input-file",type:"file",name:"file",onChange:function(e){var r=e.target.files;if(r){var a=r[0];("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type)&&a.size/1024<512?(m(a),b(h(h({},y),{userImage:URL.createObjectURL(a)})),j.current.disabled=Boolean(!y.email),c("")):(e.target.files=null,n.current.value="",m(null),c("".concat(t("loadImg"))))}}}),i.length>0&&(0,r.jsx)(d.Z,{text:i}),(0,r.jsxs)("div",h({className:"submit"},{children:[(0,r.jsx)("button",h({ref:j,className:"learning__btn",disabled:!0},{children:t("save")})),(0,r.jsx)("button",h({className:"learning__btn close"},{children:t("closePhoto")}))]}))]}))};var m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)};const g=function(e){var t=(0,o.$)().t,n=a.useState("one"),u=n[0],p=n[1];return(0,r.jsxs)("div",m({className:(0,s.A)("sign-wrapper",{},[e.className])},{children:[(0,r.jsx)("h2",{children:t("userSettings")}),(0,r.jsx)(l.Z,m({sx:{width:"100%"}},{children:(0,r.jsx)(i.Z,m({centered:!0,value:u,onChange:function(e,t){p(t)},textColor:"secondary",indicatorColor:"secondary","aria-label":"secondary tabs example"},{children:(0,r.jsx)(c.Z,{value:"one",label:t("changePhoto")})}))})),(0,r.jsx)(f,{})]}))}}}]);