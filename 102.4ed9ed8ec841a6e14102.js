"use strict";(self.webpackChunkproj_42=self.webpackChunkproj_42||[]).push([[102],{478:(e,t,n)=>{n.d(t,{b:()=>s});var r,a="https://guiseppe-production.up.railway.app/api/";!function(e){e.COFFEE="coffee/",e.REGISTER="register/",e.USER="user/",e.LOGIN="login/",e.LOGOUT="logout/",e.SET_PICTURE="setpicture/",e.RESTORE="restore/"}(r||(r={}));var s={getUser:function(){return fetch("".concat(a).concat(r.USER),{method:"GET",credentials:"include",mode:"cors",headers:{}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},createUser:function(e){return fetch("".concat(a).concat(r.REGISTER),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},loginUser:function(e){return fetch("".concat(a).concat(r.LOGIN),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},logoutUser:function(){return fetch("".concat(a).concat(r.LOGOUT),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},updateAvatar:function(e){return fetch("".concat(a).concat(r.SET_PICTURE),{method:"PUT",credentials:"same-origin",mode:"cors",headers:{},body:e}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},restoreUser:function(e){return fetch("".concat(a).concat(r.RESTORE),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}}},4655:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(5893),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)};const s=function(e){return(0,r.jsx)("span",a({className:"error-text"},{children:e.text}))}},3305:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(5893),a=n(7294),s=n(2327),o=n(4655),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},c=RegExp(/^\s?[A-Z0–9]+[A-Z0–9._+-]{0,}@[A-Z0–9._+-]+\.[A-Z0–9]{2,4}\s?$/i),l=RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$@!%&*?])[A-Za-z\d#$@!%&*?]{8,30}$/);const u=function(e){var t=(0,s.$)().t;return(0,r.jsxs)("div",i({className:"secretWord"===e.type?"username":e.type},{children:[(0,r.jsx)("label",i({className:"label",htmlFor:e.type},{children:t("".concat(e.type))})),(0,r.jsx)("input",{className:"input",type:"password"===e.type?"password":"text",name:e.type,value:e.initialState[e.type],onChange:function(t){var n;t.preventDefault();var r=t.target,a=r.name,s=r.value;switch(a){case"username":e.initialState.errors.username=s.length<5?"Username must be 5 characters long!":"";break;case"email":e.initialState.errors.email=c.test(s)?"":"Email is not valid!";break;case"password":e.initialState.errors.password=l.test(s)?"":"Password must be minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character";break;case"secretWord":e.initialState.errors.secretWord=s.length<5?"Secret word must be 5 characters long!":""}var o=i(i({},e.initialState),((n={})[a]=s,n));e.checkInputChange(o)}}),e.initialState.errors["".concat(e.type)].length>0&&(0,r.jsx)(o.Z,{text:e.initialState.errors[e.type]})]}))};var p=n(478),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)};const h=function(e){var t=(0,s.$)().t,n=(0,a.useState)({username:"",email:"",password:"",secretWord:"",errors:{username:"",email:"",password:"",secretWord:""}}),i=n[0],c=n[1],l=(0,a.useState)(""),h=l[0],f=l[1],m=(0,a.useRef)(),g=function(e){c(d({},e)),f("")};return(0,r.jsxs)("form",d({ref:m,className:"form",onSubmit:function(t){t.preventDefault();var n=!0;if(Object.values(i.errors).forEach((function(e){return e.length>0&&(n=!1)})),n){switch(e.typeForm){case"sign-up":p.b.createUser({name:i.username,email:i.email,password:i.password,secretWord:i.secretWord}).then((function(e){e&&"User created"===e.message&&p.b.loginUser({email:i.email,password:i.password}).then((function(e){e.hasOwnProperty("error")?f(e.error||"Try again"):m.current.parentElement.style.display="none"}))}));break;case"login":p.b.loginUser({email:i.email,password:i.password}).then((function(e){e.hasOwnProperty("error")?f(e.error||"Try again"):m.current.parentElement.style.display="none"}));break;case"restore":p.b.restoreUser({email:i.email,password:i.password,secretWord:i.secretWord}).then((function(e){500!==e.statusCode?p.b.loginUser({email:i.email,password:i.password}).then((function(e){e.hasOwnProperty("error")?f(e.error||"Try again"):m.current.parentElement.style.display="none"})):f(e.message||"Try again")}))}c({username:"",email:"",password:"",secretWord:"",errors:{username:"",email:"",password:"",secretWord:""}})}},noValidate:!0},{children:[h.length>0&&(0,r.jsx)(o.Z,{text:h}),"login"===e.typeForm&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{type:"email",checkInputChange:g,initialState:i}),(0,r.jsx)(u,{type:"password",checkInputChange:g,initialState:i})]}),"sign-up"===e.typeForm&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{type:"username",checkInputChange:g,initialState:i}),(0,r.jsx)(u,{type:"email",checkInputChange:g,initialState:i}),(0,r.jsx)(u,{type:"password",checkInputChange:g,initialState:i}),(0,r.jsx)(u,{type:"secretWord",checkInputChange:g,initialState:i})]}),"restore"===e.typeForm&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{type:"email",checkInputChange:g,initialState:i}),(0,r.jsx)(u,{type:"secretWord",checkInputChange:g,initialState:i}),(0,r.jsx)(u,{type:"password",checkInputChange:g,initialState:i})]}),(0,r.jsx)("div",d({className:"submit"},{children:(0,r.jsx)("button",d({className:"learning__btn"},{children:"sign-up"===e.typeForm?t("register"):"restore"===e.typeForm?t("restore"):t("login")}))}))]}))}},102:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(5893),a=n(7294),s=n(4160),o=n(2327),i=n(8435),c=n(2640),l=n(1508),u=n(3305),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},p.apply(this,arguments)},d=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};const f=function(e){var t=(0,o.$)().t,n=a.useState("login"),f=n[0],m=n[1];return(0,r.jsxs)("div",p({className:(0,s.A)("sign-wrapper",{},[e.className])},{children:[(0,r.jsx)("h2",{children:t("authorization")}),(0,r.jsx)(l.Z,p({sx:{width:"100%"}},{children:(0,r.jsxs)(i.Z,p({value:f,onChange:function(e,t){return d(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,m(t)];case 1:return e.sent(),[2]}}))}))},textColor:"secondary",indicatorColor:"secondary","aria-label":"secondary tabs example"},{children:[(0,r.jsx)(c.Z,{value:"login",label:t("login")}),(0,r.jsx)(c.Z,{value:"sign-up",label:t("sign-up")}),(0,r.jsx)(c.Z,{value:"restore",disableRipple:!0,disabled:!0})]}))})),(0,r.jsx)(u.Z,{typeForm:f}),(0,r.jsx)("a",p({onClick:function(e){return d(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,m("restore")];case 1:return e.sent(),[2]}}))}))}},{children:t("restore")}))]}))};var m=n(7109),g=n(478),y=n(4655),b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},b.apply(this,arguments)};const v=function(e){var t=(0,o.$)().t,n=(0,a.useRef)(null),s=(0,a.useState)(""),i=s[0],c=s[1],l=(0,a.useState)(null),u=l[0],p=l[1],d=(0,a.useState)({userName:"",email:"",secretWord:"",userImage:"",isActivated:!1}),h=d[0],f=d[1],v=(0,a.useRef)(),j=(0,a.useRef)();return(0,a.useEffect)((function(){g.b.getUser().then((function(e){e&&!e.hasOwnProperty("message")?(f(b(b({},h),{email:e.email,userName:e.name,userImage:e.userImage,isActivated:e.isActivated})),e.isActivated||(v.current.textContent="".concat(t("activate")),n.current.disabled=Boolean(!h.userName))):(v.current.textContent="".concat(t("login-reload")),n.current.disabled=Boolean(!h.userName))}))}),[p]),(0,r.jsxs)("form",b({className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("userImage",u),t.append("email",h.email),g.b.updateAvatar(t).then((function(e){f(b(b({},h),{userImage:e}))})),n.current.value="",p(null),j.current.disabled=Boolean(!0)},noValidate:!0},{children:[(0,r.jsx)(m.Z,{alt:t("userPhoto"),src:h.userImage,sx:{width:72,height:72}}),(0,r.jsx)("h3",{children:h.userName}),(0,r.jsx)("label",b({ref:v,className:"label label-file",htmlFor:"file"},{children:t("add-file")})),(0,r.jsx)("input",{ref:n,id:"file",className:"input input-file",type:"file",name:"file",onChange:function(e){var r=e.target.files;if(r){var a=r[0];("image/png"===a.type||"image/jpeg"===a.type||"image/jpg"===a.type)&&a.size/1024<512?(p(a),f(b(b({},h),{userImage:URL.createObjectURL(a)})),j.current.disabled=Boolean(!h.email),c("")):(e.target.files=null,n.current.value="",p(null),c("".concat(t("loadImg"))))}}}),i.length>0&&(0,r.jsx)(y.Z,{text:i}),(0,r.jsx)("div",b({className:"submit"},{children:(0,r.jsx)("button",b({ref:j,className:"learning__btn",disabled:!0},{children:t("save")}))}))]}))};var j=function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},j.apply(this,arguments)};const x=function(e){var t=(0,o.$)().t,n=a.useState("one"),u=n[0],p=n[1];return(0,r.jsxs)("div",j({className:(0,s.A)("sign-wrapper",{},[e.className])},{children:[(0,r.jsx)("h2",{children:t("userSettings")}),(0,r.jsx)(l.Z,j({sx:{width:"100%"}},{children:(0,r.jsx)(i.Z,j({centered:!0,value:u,onChange:function(e,t){p(t)},textColor:"secondary",indicatorColor:"secondary","aria-label":"secondary tabs example"},{children:(0,r.jsx)(c.Z,{value:"one",label:t("changePhoto")})}))})),(0,r.jsx)(v,{})]}))};var w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},w.apply(this,arguments)};const S=function(){return(0,r.jsxs)("div",w({className:"learning-mode"},{children:[(0,r.jsx)(f,{className:"card"}),(0,r.jsx)(x,{className:"card"})]}))}}}]);